{
  "hash": "8922a468f04dabdb460171999033770c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Exercise 2: DataVis Makeover\"\ndate: \"January 23, 2024\"\ndate-modified: \"last-modified\"\ntoc: true\nexecute:\n  eval: true\n  echo: true\n  freeze: true\n  warning: false\n  message: false\neditor: visual\n---\n\n\n# 1. The Task\n\nIn this take-home exercise, I have selected a peer's [Take-home Exercise 1](https://isss608-ay2023-24t2-ftj72.netlify.app/take-home_ex/take-home_ex01/take-home_ex01) and will improve on the original visualisation by:\n\n-   critiquing the submission in terms of clarity and aesthetics,\n\n-   providing a sketch for an alternative design using the data visualisation design principles and best practices learned in Lesson 1 and 2, and\n\n-   remaking the original design by using ggplot2, ggplot2 extensions and tidyverse packages.\n\nThe dataset used is the Student Questionaire data file downloaded from [PISA 2022](https://www.oecd.org/pisa/data/2022database/), and processed by RStudio `tidyverse` family of packages and visualized by `ggplot2` and its extensions.\n\n# 2. The Set-up\n\nThe set-up follows up the same steps carried out by the peer. This segment is kept brief as it is not the focus of the exercise.\n\n## 2.1 Loading R packages\n\nBefore we begin, we will first load the necessary R packages, as what was carried out by the peer.\n\nThe peer loaded the following R packages - [tidyverse](https://www.tidyverse.org/), [haven](https://haven.tidyverse.org/), [ggplot2](https://ggplot2.tidyverse.org/), [patchwork](https://patchwork.data-imaginist.com/),[ggrepel](https://ggrepel.slowkow.com/),[ggthemes](https://ggplot2.tidyverse.org/reference/ggtheme.html),[hrbrthemes](https://www.rdocumentation.org/packages/hrbrthemes/versions/0.1.0),[dplyr](https://dplyr.tidyverse.org/).\n\nI will further load [ggridges](https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html), [ggdist](https://mjskay.github.io/ggdist/) and [ggpubr](https://rpkgs.datanovia.com/ggpubr/).\n\nThe code chunk to load the packages is as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse,haven,ggplot2,patchwork,ggrepel,ggthemes,hrbrthemes,dplyr,ggridges,ggdist,ggpubr)\n```\n:::\n\n\n## 2.2 Importing the data\n\n‘read_sas()’ of haven was used to import the PISA data into the R environment:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq <- read_sas(\"data/cy08msp_stu_qqq.sas7bdat\")\n```\n:::\n\n\nThe peer then filtered the data by limiting it to Singaporean students and removing columns with uniform values. The code chunk is as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered <- stu_qqq %>%\n  filter(CNT == \"SGP\") %>%\n  select_if(function(x) !all(x == x[1]))\n```\n:::\n\n\nThe data was then exported as a new rds file and read for further analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_rds(stu_qqq_SG_filtered,\n          \"data/stu_qqq_SG_filtered.rds\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered <- read_rds(\"data/stu_qqq_SG_filtered.rds\")\n```\n:::\n\n\nAn overview of the structure of the data is shown below\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## Structure of dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(stu_qqq_SG_filtered)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ntibble [6,606 × 635] (S3: tbl_df/tbl/data.frame)\n $ CNTSCHID   : num [1:6606] 70200052 70200134 70200112 70200004 70200152 ...\n  ..- attr(*, \"label\")= chr \"Intl. School ID\"\n $ CNTSTUID   : num [1:6606] 70200001 70200002 70200003 70200004 70200005 ...\n  ..- attr(*, \"label\")= chr \"Intl. Student ID\"\n $ STRATUM    : chr [1:6606] \"SGP01\" \"SGP01\" \"SGP01\" \"SGP01\" ...\n  ..- attr(*, \"label\")= chr \"Stratum ID 5-character (cnt + original stratum ID)\"\n $ BOOKID     : num [1:6606] 4 45 8 40 42 15 13 39 14 7 ...\n  ..- attr(*, \"label\")= chr \"Form Identifier\"\n $ ST001D01T  : num [1:6606] 10 10 10 10 10 10 10 10 10 10 ...\n  ..- attr(*, \"label\")= chr \"Student International Grade (Derived)\"\n $ ST003D02T  : num [1:6606] 10 6 7 2 9 9 3 4 8 6 ...\n  ..- attr(*, \"label\")= chr \"Student (Standardized) Birth - Month\"\n $ ST004D01T  : num [1:6606] 1 2 2 2 1 1 2 2 1 2 ...\n  ..- attr(*, \"label\")= chr \"Student (Standardized) Gender\"\n $ ST250Q01JA : num [1:6606] 2 1 1 2 2 2 1 1 2 2 ...\n  ..- attr(*, \"label\")= chr \"Which of the following are in your [home]: A room of your own\"\n $ ST250Q02JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Which of the following are in your [home]: A computer (laptop, desktop, or tablet) that you can use for school work\"\n $ ST250Q03JA : num [1:6606] 1 1 2 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Which of the following are in your [home]: Educational Software or Apps\"\n $ ST250Q04JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Which of the following are in your [home]: Your own [cell phone] with Internet access (e.g. smartphone)\"\n $ ST250Q05JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Which of the following are in your [home]: Internet access (e.g. Wi-fi) (excluding through smartphones)\"\n $ ST250D06JA : chr [1:6606] \"7020002\" \"7020001\" \"7020001\" \"7020002\" ...\n  ..- attr(*, \"label\")= chr \"Which of the following are in your home? <Country-specific item 1>\"\n $ ST250D07JA : chr [1:6606] \"7020002\" \"7020001\" \"7020002\" \"7020002\" ...\n  ..- attr(*, \"label\")= chr \"Which of the following are in your home? <Country-specific item 2>\"\n $ ST251Q01JA : num [1:6606] 2 1 2 1 2 2 2 1 3 3 ...\n  ..- attr(*, \"label\")= chr \"How many of these items are there at your [home]: Cars, vans, or trucks\"\n $ ST251Q02JA : num [1:6606] 1 4 1 2 2 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"How many of these items are there at your [home]: Mopeds or motorcycles\"\n $ ST251Q03JA : num [1:6606] 3 3 3 3 2 2 3 3 4 3 ...\n  ..- attr(*, \"label\")= chr \"How many of these items are there at your [home]: Rooms with a bath or shower\"\n $ ST251Q04JA : num [1:6606] 3 3 3 3 2 3 3 3 4 3 ...\n  ..- attr(*, \"label\")= chr \"How many of these items are there at your [home]: Rooms with a [flush toilet]\"\n $ ST251Q06JA : num [1:6606] 3 4 2 2 1 2 2 3 4 1 ...\n  ..- attr(*, \"label\")= chr \"How many of these items are there at your [home]: Musical instruments (e.g. guitar, piano, [country-specific example])\"\n $ ST251Q07JA : num [1:6606] 3 2 1 1 4 1 4 1 4 3 ...\n  ..- attr(*, \"label\")= chr \"How many of these items are there at your [home]: Works of art (e.g. paintings, sculptures, [country-specific example])\"\n $ ST253Q01JA : num [1:6606] 7 8 7 6 7 7 8 8 8 7 ...\n  ..- attr(*, \"label\")= chr \"How many [digital devices] with screens are there in your [home]?\"\n $ ST254Q01JA : num [1:6606] 2 3 2 2 2 2 2 2 2 2 ...\n  ..- attr(*, \"label\")= chr \"How many of the following [digital devices] are in your [home]: Televisions\"\n $ ST254Q02JA : num [1:6606] 1 2 2 1 3 2 2 5 2 2 ...\n  ..- attr(*, \"label\")= chr \"How many of the following [digital devices] are in your [home]: Desktop computers\"\n $ ST254Q03JA : num [1:6606] 3 2 2 2 2 2 3 3 3 4 ...\n  ..- attr(*, \"label\")= chr \"How many of the following [digital devices] are in your [home]: Laptop computers or notebooks\"\n $ ST254Q04JA : num [1:6606] 2 3 2 1 1 2 2 3 3 2 ...\n  ..- attr(*, \"label\")= chr \"How many of the following [digital devices] are in your [home]: Tablets (e.g. [iPad®], [BlackBerry® Playbook™])\"\n $ ST254Q05JA : num [1:6606] 1 5 1 1 NA 1 1 5 2 2 ...\n  ..- attr(*, \"label\")= chr \"How many of the following [digital devices] are in your [home]: E-book readers (e.g. [Kindle™], [Kobo], [Bookeen])\"\n $ ST254Q06JA : num [1:6606] 3 2 3 3 4 2 4 3 4 4 ...\n  ..- attr(*, \"label\")= chr \"How many of the following [digital devices] are in your [home]: [Cell phones] with Internet access (i.e. smartphones)\"\n $ ST255Q01JA : num [1:6606] 7 4 4 3 2 2 4 5 7 4 ...\n  ..- attr(*, \"label\")= chr \"How many books are there in your [home]?\"\n $ ST256Q01JA : num [1:6606] 2 4 5 2 4 1 1 3 4 4 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: Religious books (e.g. [Bible], [Example 2])\"\n $ ST256Q02JA : num [1:6606] 2 5 2 1 1 2 1 5 4 2 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: Classical literature (e.g. [Shakespeare], [Example 2])\"\n $ ST256Q03JA : num [1:6606] 4 5 2 1 1 2 2 5 5 1 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: Contemporary literature\"\n $ ST256Q06JA : num [1:6606] 4 3 3 2 2 5 2 4 4 1 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: Books on science\"\n $ ST256Q07JA : num [1:6606] 3 5 5 2 2 5 1 4 3 1 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: Books on art, music, or design\"\n $ ST256Q08JA : num [1:6606] 3 3 3 1 1 5 1 5 5 2 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: [Technical reference books]\"\n $ ST256Q09JA : num [1:6606] 2 2 4 2 2 2 2 2 2 3 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: Dictionaries\"\n $ ST256Q10JA : num [1:6606] 4 4 5 2 4 1 4 4 4 3 ...\n  ..- attr(*, \"label\")= chr \"How many of these books at [home]: Books to help with your school work\"\n $ ST230Q01JA : num [1:6606] 4 4 2 4 4 3 2 2 3 4 ...\n  ..- attr(*, \"label\")= chr \"How many siblings (including brothers, sisters, step-brothers, and step-sisters) do you have?\"\n $ ST005Q01JA : num [1:6606] 2 2 2 2 2 2 2 2 2 2 ...\n  ..- attr(*, \"label\")= chr \"What is the [highest level of schooling] completed by your mother?\"\n $ ST006Q01JA : num [1:6606] 2 2 2 2 2 2 2 NA 2 2 ...\n  ..- attr(*, \"label\")= chr \"Does your mother have any of the following qualifications: [ISCED level 8]\"\n $ ST006Q02JA : num [1:6606] 2 2 2 2 2 2 2 1 2 2 ...\n  ..- attr(*, \"label\")= chr \"Does your mother have any of the following qualifications: [ISCED level 7]\"\n $ ST006Q03JA : num [1:6606] 1 2 2 2 2 2 2 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Does your mother have any of the following qualifications: [ISCED level 6]\"\n $ ST006Q04JA : num [1:6606] 2 1 2 2 1 1 2 1 1 2 ...\n  ..- attr(*, \"label\")= chr \"Does your mother have any of the following qualifications: [ISCED level 5]\"\n $ ST006Q05JA : num [1:6606] 1 1 2 1 2 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Does your mother have any of the following qualifications: [ISCED level 4]\"\n $ ST007Q01JA : num [1:6606] 2 2 2 4 2 2 4 2 2 2 ...\n  ..- attr(*, \"label\")= chr \"What is the [highest level of schooling] completed by your father?\"\n $ ST008Q01JA : num [1:6606] 2 2 2 NA 2 2 2 NA 2 2 ...\n  ..- attr(*, \"label\")= chr \"Does your father have any of the following qualifications: [ISCED level 8]\"\n $ ST008Q02JA : num [1:6606] 2 2 2 NA 2 1 2 NA 2 2 ...\n  ..- attr(*, \"label\")= chr \"Does your father have any of the following qualifications: [ISCED level 7]\"\n $ ST008Q03JA : num [1:6606] 2 2 2 NA 2 1 2 1 1 2 ...\n  ..- attr(*, \"label\")= chr \"Does your father have any of the following qualifications: [ISCED level 6]\"\n $ ST008Q04JA : num [1:6606] 1 1 2 NA 1 1 2 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Does your father have any of the following qualifications: [ISCED level 5]\"\n $ ST008Q05JA : num [1:6606] 2 1 2 1 2 1 2 1 1 2 ...\n  ..- attr(*, \"label\")= chr \"Does your father have any of the following qualifications: [ISCED level 4]\"\n $ ST258Q01JA : num [1:6606] 1 1 1 5 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In the past 30 days, how often did you not eat because there was not enough money to buy food?\"\n $ ST019AQ01T : num [1:6606] 1 1 1 1 1 2 1 2 1 1 ...\n  ..- attr(*, \"label\")= chr \"In what country were you and your parents born? You\"\n $ ST019BQ01T : num [1:6606] 1 1 2 1 1 2 1 2 1 1 ...\n  ..- attr(*, \"label\")= chr \"In what country were you and your parents born? Mother\"\n $ ST019CQ01T : num [1:6606] 1 1 1 1 1 2 1 2 1 1 ...\n  ..- attr(*, \"label\")= chr \"In what country were you and your parents born? Father\"\n $ ST022Q01TA : num [1:6606] 1 1 2 2 1 2 1 2 1 2 ...\n  ..- attr(*, \"label\")= chr \"What language do you speak at home most of the time?\"\n $ ST226Q01JA : num [1:6606] 1 1 1 1 1 1 1 4 1 1 ...\n  ..- attr(*, \"label\")= chr \"How long have you been enrolled at this school?\"\n $ ST125Q01NA : num [1:6606] 3 5 8 4 8 3 4 8 8 4 ...\n  ..- attr(*, \"label\")= chr \"How old were you when you started [ISCED 0]: Years\"\n $ ST126Q01TA : num [1:6606] 4 5 5 5 5 5 5 5 4 5 ...\n  ..- attr(*, \"label\")= chr \"How old were you when you started [ISCED 1]: Years\"\n $ ST127Q01TA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Have you ever repeated a [grade]: At [ISCED 1]\"\n $ ST127Q02TA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Have you ever repeated a [grade]: At [ISCED 2]\"\n $ ST127Q03TA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Have you ever repeated a [grade]: At [ISCED 3]\"\n $ ST260Q01JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Have you ever missed school for more than three months in a row: At [ISCED 1]\"\n $ ST260Q02JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Have you ever missed school for more than three months in a row: At [ISCED 2]\"\n $ ST260Q03JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Have you ever missed school for more than three months in a row: At [ISCED 3]\"\n $ ST062Q01TA : num [1:6606] 1 1 1 1 2 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In the last two full weeks of school, how often: I [skipped] a whole school day\"\n $ ST062Q02TA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In the last two full weeks of school, how often: I [skipped] some classes\"\n $ ST062Q03TA : num [1:6606] 1 1 1 1 2 2 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In the last two full weeks of school, how often: I arrived late for school\"\n $ ST267Q02JA : num [1:6606] 2 3 3 NA 3 3 1 NA 4 NA ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: If I walked into my classes upset, my teachers would be concerned about me.\"\n $ ST267Q04JA : num [1:6606] 2 2 NA NA 3 NA 1 3 2 2 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: I feel intimidated by the teachers at my school.\"\n $ ST267Q05JA : num [1:6606] 3 3 3 3 3 3 NA 3 NA NA ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: When my teachers ask how I am doing, they are really interested in my answer.\"\n $ ST267Q07JA : num [1:6606] 3 4 4 NA NA NA NA NA 4 3 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: The teachers at my school are interested in students' well-being.\"\n $ ST267Q08JA : num [1:6606] 2 NA NA 1 1 NA 1 3 NA 2 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: The teachers at my school are mean towards me.\"\n $ ST034Q01TA : num [1:6606] 4 4 3 2 4 4 2 1 3 3 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree:  I feel like an outsider (or left out of things) at school.\"\n $ ST034Q03TA : num [1:6606] 2 NA NA 3 1 2 3 3 2 NA ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree:  I feel like I belong at school.\"\n $ ST034Q04TA : num [1:6606] 4 3 2 2 4 NA 3 2 NA 3 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree:  I feel awkward and out of place in my school.\"\n $ ST034Q05TA : num [1:6606] 2 2 2 2 NA 2 NA 3 2 2 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree:  Other students seem to like me.\"\n $ ST034Q06TA : num [1:6606] 3 3 3 NA 4 4 3 4 3 3 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree:  I feel lonely at school.\"\n $ ST038Q03NA : num [1:6606] 1 1 1 1 1 1 2 3 1 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: Other students left me out of things on purpose.\"\n $ ST038Q04NA : num [1:6606] 1 1 1 1 1 1 4 3 2 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: Other students made fun of me.\"\n $ ST038Q05NA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: I was threatened by other students.\"\n $ ST038Q06NA : num [1:6606] 1 1 1 1 1 1 1 1 1 2 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: Other students took away or destroyed things that belonged to me.\"\n $ ST038Q07NA : num [1:6606] 1 2 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: I got hit or pushed around by other students.\"\n $ ST038Q08NA : num [1:6606] 1 1 1 1 1 1 2 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: Other students spread nasty rumours about me.\"\n $ ST038Q09JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: I was in a physical fight on school property.\"\n $ ST038Q10JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: I stayed home from school because I felt unsafe.\"\n $ ST038Q11JA : num [1:6606] 1 1 1 1 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"In past 12 months, how often: I gave money to someone at school because they threatened me.\"\n $ ST265Q01JA : num [1:6606] 2 1 1 2 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: I feel safe on my way to school.\"\n $ ST265Q02JA : num [1:6606] 2 1 1 2 1 2 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: I feel safe on my way home from school.\"\n $ ST265Q03JA : num [1:6606] 2 1 2 2 1 2 3 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: I feel safe in my classrooms at school.\"\n $ ST265Q04JA : num [1:6606] 2 1 2 2 1 2 3 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Agree/disagree: I feel safe at other places at school (e.g. hallway, cafeteria, restroom).\"\n $ ST266Q01JA : num [1:6606] 2 1 2 2 2 1 1 2 2 1 ...\n  ..- attr(*, \"label\")= chr \"Occur during past four weeks:  Our school was vandalised.\"\n $ ST266Q02JA : num [1:6606] 2 2 2 2 2 2 2 2 2 2 ...\n  ..- attr(*, \"label\")= chr \"Occur during past four weeks:  I witnessed a fight on school property in which someone got hurt.\"\n $ ST266Q03JA : num [1:6606] 2 2 2 2 2 2 2 2 2 2 ...\n  ..- attr(*, \"label\")= chr \"Occur during past four weeks:  I saw gangs in school.\"\n $ ST266Q04JA : num [1:6606] 2 2 2 2 2 2 2 2 2 2 ...\n  ..- attr(*, \"label\")= chr \"Occur during past four weeks:  I heard a student threaten to hurt another student.\"\n $ ST266Q05JA : num [1:6606] 2 2 2 2 2 2 2 2 2 2 ...\n  ..- attr(*, \"label\")= chr \"Occur during past four weeks:  I saw a student carrying a gun or knife at school.\"\n $ ST294Q01JA : num [1:6606] 5 4 6 1 1 1 1 6 6 1 ...\n  ..- attr(*, \"label\")= chr \"How many days/wk before school: Eat breakfast\"\n $ ST294Q02JA : num [1:6606] 1 5 2 1 4 6 1 6 1 1 ...\n  ..- attr(*, \"label\")= chr \"How many days/wk before school: Study for school or homework\"\n $ ST294Q03JA : num [1:6606] 6 2 1 6 1 3 4 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"How many days/wk before school: Work in the household or take care of family members\"\n $ ST294Q04JA : num [1:6606] 1 1 1 4 1 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"How many days/wk before school: Work for pay\"\n $ ST294Q05JA : num [1:6606] 1 3 1 6 6 1 1 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"How many days/wk before school: Exercise or practise a sport (e.g. running, cycling, aerobics, soccer, skating,\"| __truncated__\n  [list output truncated]\n```\n\n\n:::\n:::\n\n:::\n\n# 3. Data Preparation\n\nData preparation steps taken by the peer are briefly indicated below.\n\n## 3.1 Mean Plausible Value (PV) for all students\n\nThe code chunk below obtains the mean of the ten Plausible Values (PV) provided for the subjects of Math, Reading and Science, as an estimate for the student’s performance in the respective subjects.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered <- stu_qqq_SG_filtered %>%\n  mutate(\n    MATH_Score = rowMeans(select(., PV1MATH:PV10MATH), na.rm = TRUE),\n    READ_Score = rowMeans(select(., PV1READ:PV10READ), na.rm = TRUE),\n    SCIE_Score = rowMeans(select(., PV1SCIE:PV10SCIE), na.rm = TRUE)\n  )\n```\n:::\n\n\n## 3.2 Mean PV by school {#sect3.2}\n\nThe code chunk below obtains the mean Plausible Values (PV) for the subjects of Math, Reading and Science by school ID, as an estimate for the school's performance in the respective subjects.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nGet_School <- stu_qqq_SG_filtered\n\nBy_School <- Get_School %>%\n  group_by(CNTSCHID) %>%\n  summarize(\n    Avg_Math = mean(MATH_Score, na.rm = TRUE),\n    Avg_Read = mean(READ_Score, na.rm = TRUE),\n    Avg_Scie = mean(SCIE_Score, na.rm = TRUE)\n  )\n```\n:::\n\n\n## 3.3 Recoding Gender variable\n\nGender is represented under the variable \"ST004D01T\" within the dataset, for which responses are written in the form of 1 (Female), and 2 (Male). The peer converted these numeric values to their respective text responses \"Female\" and \"Male\" respectively using the code chunk below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered <- stu_qqq_SG_filtered %>%\n  mutate(Gender = ifelse(ST004D01T == 1, \"Female\", \"Male\"))\n```\n:::\n\n\n## 3.4 Changing data type for school ID and student ID\n\nThe peer also converted the variable \"CNTSCHID\" representing school ID from numeric to character data type. I will take the added step of converting the data type of \"CNTSTUID\" from numeric to character data type using the following code chunk:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered <- stu_qqq_SG_filtered %>%\n  mutate(CNTSCHID = as.character(CNTSCHID),CNTSTUID = as.character(CNTSTUID))\n```\n:::\n\n\n## 3.5 Checks for duplicate data\n\nThe peer also carried out a check for duplicate data and determined that there were none.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered[duplicated(stu_qqq_SG_filtered),]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 0 × 639\n# ℹ 639 variables: CNTSCHID <chr>, CNTSTUID <chr>, STRATUM <chr>, BOOKID <dbl>,\n#   ST001D01T <dbl>, ST003D02T <dbl>, ST004D01T <dbl>, ST250Q01JA <dbl>,\n#   ST250Q02JA <dbl>, ST250Q03JA <dbl>, ST250Q04JA <dbl>, ST250Q05JA <dbl>,\n#   ST250D06JA <chr>, ST250D07JA <chr>, ST251Q01JA <dbl>, ST251Q02JA <dbl>,\n#   ST251Q03JA <dbl>, ST251Q04JA <dbl>, ST251Q06JA <dbl>, ST251Q07JA <dbl>,\n#   ST253Q01JA <dbl>, ST254Q01JA <dbl>, ST254Q02JA <dbl>, ST254Q03JA <dbl>,\n#   ST254Q04JA <dbl>, ST254Q05JA <dbl>, ST254Q06JA <dbl>, ST255Q01JA <dbl>, …\n```\n\n\n:::\n:::\n\n\n# 4. Critique and Redesigning Take-home Exercise 1\n\nThere were a total of four visualisations in the peer's Take-home exercise and my assessment of their clarity and aesthetics are as follows:\n\n## 4.1 Visualisation 1: PV scores of all students for each subject area\n\n### 4.1.1 Critique\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes (x = 1, y = MATH_Score))+\n  geom_boxplot(notch=TRUE)+\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"maroon\", size=2)+\n  ggtitle(\"Math Scores\")+\n  theme_hc()+\n  coord_cartesian(ylim = c(100, 900))+\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.text.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes (x = 1, y = READ_Score))+\n  geom_boxplot(notch=TRUE)+\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"maroon\", size=2)+\n  ggtitle(\"Reading Scores\")+\n  theme_hc()+\n  coord_cartesian(ylim = c(100, 900))+\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.text.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Science {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes (x = 1, y = SCIE_Score))+\n  geom_boxplot(notch=TRUE)+\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"maroon\", size=2)+\n  ggtitle(\"Science Scores\")+\n  theme_hc()+\n  coord_cartesian(ylim = c(100, 900))+\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.text.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n:::\n\n+-----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Positives                                                                                                             | Negatives                                                                                                                                                                                                                                                                                                                                                                                                                  |\n+=======================================================================================================================+============================================================================================================================================================================================================================================================================================================================================================================================================================+\n| -   The theme used is appropriate as the graph is visually clean and neat.                                            | -   The title of the chart is too generic, stating just \"Math Score\", \"Reading Score\" and \"Science Score\" without indicating that these are average scores of students. A reader would have to further read the explanation accompanying the visualisation to determine the level of granularity of the data i.e. to check if the visualisation represented scores at the student level or at a more general school level. |\n|                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                            |\n| -   The mean value is represented as a maroon dot in the boxplot which provides an additional data point for readers. | -   The y-axis representing PV scores is unlabelled as the code includes \"axis.title.y = element_blank()\".                                                                                                                                                                                                                                                                                                                 |\n|                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                            |\n|                                                                                                                       | -   Based on the [Code Book](https://webfs.oecd.org/pisa2022/CY08MSP_CODEBOOK_5thDecember23.xlsx) provided by OECD, PV scores can range from 0 to 1000 however the y-axis ranges from 100 to 900 which is a misrepresentation.                                                                                                                                                                                             |\n|                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                            |\n|                                                                                                                       | -   Notches in notched boxplots represent confidence intervals around medians, and help readers to visually assess whether medians of distributions differ. If the notched areas do not overlap across boxplots, the medians are different from one another. However, in this case, the plots are too wide and flat, making it difficult to observe the notch.                                                             |\n|                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                            |\n|                                                                                                                       | -   Further, the notch does not serve its purpose for comparison as the plots for Math, Reading and Science are separately indicated in tabsets. One cannot compare across all three subjects at a glance.                                                                                                                                                                                                                 |\n+-----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n### 4.1.2 Sketch of alternative design\n\n![](Slide1.JPG){width=\"514\"}\n\nWe will improve the original visualisation by:\n\n-   renaming the title\n\n-   adding in the y-axis label and reset the limits of the y-axis scale to the range of 0 to 1000\n\n-   adding an annotation to label median and removing the notches as the differences between the notches are not clear and the annotation would suffice in indicating the different median values\n\n-   having a side-by-side comparison of all 3 subjects via patchwork\n\n### 4.1.3 Remaking the design\n\nThe code chunks for the individual plots are as follows:\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np3 <- ggplot(data = stu_qqq_SG_filtered,\n       aes(y = MATH_Score)) +\n  geom_boxplot(width=0.03)+\n  stat_boxplot(geom = \"errorbar\", width = 0.01) +\n  stat_summary(aes(x = 0),\n               geom = \"point\",       \n               fun.y = \"mean\",         \n               colour = \"maroon\", \n               size = 2) +\n  geom_text(aes(x=0,y=900,\n                label=paste(\"Median:\",median(MATH_Score))),\n            vjust=-1,\n            hjust=0.5,\n            colour=\"maroon\",\n            size=3)+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0,1000,by=100)) +\n  labs(\n    title = \"Math Scores\",\n    y = \"Math Scores\"\n  )+\n  theme_hc(base_size=10)+\n  theme(aspect.ratio = 3,axis.text.x = element_blank(),axis.line.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank() )\n```\n:::\n\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np4 <- ggplot(data = stu_qqq_SG_filtered,\n       aes(y = READ_Score)) +\n  geom_boxplot(width=0.03)+\n  stat_boxplot(geom = \"errorbar\", width = 0.01) +\n  stat_summary(aes(x = 0),\n               geom = \"point\",       \n               fun.y = \"mean\",         \n               colour = \"blue\", \n               size = 2) +\n  geom_text(aes(x=0,y=900,\n                label=paste(\"Median:\",median(READ_Score))),\n            vjust=-1,\n            hjust=0.5,\n            colour=\"blue\",\n            size=3)+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0,1000,by=100)) +\n  labs(\n    title = \"Reading Scores\",\n    y = \"Reading Scores\"\n  )+\n  theme_hc(base_size = 10)+\n  theme(aspect.ratio = 3,axis.text.x = element_blank(),axis.line.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank())\n```\n:::\n\n\n## Science {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np5 <- ggplot(data = stu_qqq_SG_filtered,\n       aes(y = SCIE_Score)) +\n  geom_boxplot(width=0.03)+\n  stat_boxplot(geom = \"errorbar\", width = 0.01) +\n  stat_summary(aes(x = 0),\n               geom = \"point\",       \n               fun.y = \"mean\",         \n               colour = \"orange\", \n               size = 2) +\n  geom_text(aes(x=0,y=900,\n                label=paste(\"Median:\",median(SCIE_Score))),\n            vjust=-1,\n            hjust=0.5,\n            colour=\"orange\",\n            size=3)+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0,1000,by=100)) +\n  labs(\n    title = \"Science Scores\",\n    y = \"Science Scores\"\n  )+\n  theme_hc(base_size = 10)+\n  theme(aspect.ratio = 3,axis.text.x = element_blank(),axis.line.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank())\n```\n:::\n\n:::\n\nThe code chunk to visualise all 3 plots side-by-side is as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(p3|p4|p5)+\n  plot_annotation(\n  title = \"Distribution of scores of all students\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\nThis visualisation enables better comparison of student performance across all three subjects. From the above, we can understand that students perform better in Math, followed by Science and lastly reading.\n\n## 4.2 Visualisation 2: PV scores of all students by gender\n\n### 4.2.1 Critique\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes (x = Gender, y = MATH_Score))+\n  geom_boxplot(notch=TRUE)+\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"maroon\", size=2)+\n  ggtitle(\"Math Scores by Gender\")+\n  theme_hc()+\n  coord_cartesian(ylim = c(100, 900))+\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes (x = Gender, y = READ_Score))+\n  geom_boxplot(notch=TRUE)+\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"maroon\", size=2)+\n  ggtitle(\"Reading Scores by Gender\")+\n  theme_hc()+\n  coord_cartesian(ylim = c(100, 900))+\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Science {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes (x = Gender, y = SCIE_Score))+\n  geom_boxplot(notch=TRUE)+\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"maroon\", size=2)+\n  ggtitle(\"Science Scores by Gender\")+\n  theme_hc()+\n  coord_cartesian(ylim = c(100, 900))+\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n:::\n\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Positives                                                                                                                                                                          | Negatives                                                                                                                                                                                                                                                                                                                                                                                                             |\n+====================================================================================================================================================================================+=======================================================================================================================================================================================================================================================================================================================================================================================================================+\n| -   The graph is visually clean and neat.                                                                                                                                          | -   The y-axis representing PV scores is unlabelled as the code includes \"axis.title.y = element_blank()\".                                                                                                                                                                                                                                                                                                            |\n|                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| -   The mean value is represented as a maroon dot in the boxplot which provides an additional data point for readers.                                                              | -   Based on the [Code Book](https://webfs.oecd.org/pisa2022/CY08MSP_CODEBOOK_5thDecember23.xlsx) provided by OECD, PV scores can range from 0 to 1000 however the y-axis ranges from 100 to 900 which is a misrepresentation.                                                                                                                                                                                        |\n|                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| -   Side-by-side comparison of male vs female for each subject                                                                                                                     | -   Boxplots for female and male are coloured the same in black - it is not visually intuitive and one would need to read the labels to determine which results were for which gender.                                                                                                                                                                                                                                |\n|                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| -   The notches help readers to visually assess if the medians of the distributions differ. In this case, medians for female and male appear to be different for Math and Reading. | -   While the notches in notched boxplots help readers to visually assess that the medians of distributions differ between male and female for Math and Reading, it is less clear for Science due to the plots being wide and flat.                                                                                                                                                                                   |\n|                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                       |\n|                                                                                                                                                                                    | -   The plots for each subject are placed in individual tabs and one cannot compare across all three subjects at a glance. The visualisation does not allow readers to see and agree with the peer's insight which states \"When looking at gender differences, the performance of female and male students appear to be equal in all subjects but reading wherein female students slightly outperform male students.\" |\n+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n### 4.2.2 Sketch of alternative design\n\n![](Slide2.JPG){width=\"514\"}\n\nWe will improve the original visualisation by:\n\n-   adding in the proper axis labels and reset the limits of the scale representing scores to the range of 0 to 1000\n\n-   colour the boxplot by gender\n\n-   enhancing the boxplot by creating a raincloud plot to provide more granularity to the data i.e. an understanding of the spread of the data\n\n-   having a side-by-side comparison of all 3 subjects via patchwork\n\n### 4.2.3 Remaking the design\n\nThe code chunks for the individual plots are as follows:\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np6 <- ggplot(data = stu_qqq_SG_filtered,\n       aes (x = Gender, y = MATH_Score, fill = Gender,alpha=0.5))+\n  geom_boxplot(notch=TRUE,\n               width = 0.1,\n               position = position_nudge(x=0.06))+\n  stat_halfeye(adjust = 0.8,\n               width = 0.3,\n               justification = -0.5,\n               .width = 0,\n               point_colour = NA,\n               position = \"dodge\",\n               scale=0.9) +\n  stat_dots(side = \"left\", \n            justification = 1, \n            binwidth = .5,\n            dotsize = 10) +\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"black\", size=8,position=position_nudge(x=0.06))+\n  labs(title = \"Math Scores by Gender\",\n       y = \"Math Score\",\n       x = \"Gender\")+\n  theme_hc(base_size = 30)+\n  theme(legend.position = \"right\")+\n  guides(alpha=\"none\")+\n  coord_cartesian(ylim = c(0, 1000))+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0, 1000, by = 100))+\n  coord_flip()\n```\n:::\n\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np7 <- ggplot(data = stu_qqq_SG_filtered,\n       aes (x = Gender, y = READ_Score, fill = Gender,alpha=0.5))+\n  geom_boxplot(notch=TRUE,\n               width = 0.1,\n               position = position_nudge(x=0.06))+\n  stat_halfeye(adjust = 0.8,\n               width = 0.3,\n               justification = -0.5,\n               .width = 0,\n               point_colour = NA,\n               position = \"dodge\",\n               scale=0.9) +\n  stat_dots(side = \"left\", \n            justification = 1, \n            binwidth = .5,\n            dotsize = 10) +\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"black\", size=8,position=position_nudge(x=0.06))+\n  labs(title = \"Reading Scores by Gender\",\n       y = \"Reading Score\",\n       x = \"Gender\")+\n  theme_hc(base_size = 30)+\n  theme(legend.position = \"right\")+\n  guides(alpha=\"none\")+\n  coord_cartesian(ylim = c(0, 1000))+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0, 1000, by = 100))+\n  coord_flip()\n```\n:::\n\n\n## Science {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np8 <- ggplot(data = stu_qqq_SG_filtered,\n       aes (x = Gender, y = SCIE_Score, fill = Gender,alpha=0.5))+\n  geom_boxplot(notch=TRUE,\n               width = 0.1,\n               position = position_nudge(x=0.06))+\n  stat_halfeye(adjust = 0.8,\n               width = 0.3,\n               justification = -0.5,\n               .width = 0,\n               point_colour = NA,\n               position = \"dodge\",\n               scale=0.9) +\n  stat_dots(side = \"left\", \n            justification = 1, \n            binwidth = .5,\n            dotsize = 10) +\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour = \"black\", size=8,position=position_nudge(x=0.06))+\n  labs(title = \"Science Scores by Gender\",\n       y = \"Science Score\",\n       x = \"Gender\")+\n  theme_hc(base_size = 30)+\n  theme(legend.position=\"right\")+\n  guides(alpha=\"none\")+\n  coord_cartesian(ylim = c(0, 1000))+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0, 1000, by = 100))+\n  coord_flip()\n```\n:::\n\n:::\n\nThe code chunk to visualise plots for all 3 subjects is as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(p6/p7/p8)+\n  plot_annotation(tag_levels = 'I')\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-31-1.png){width=2880}\n:::\n:::\n\n\nThis visualisation allows us to better observe how each gender performs in each subject area, through the median and mean indicated on the boxplot but also through the density plots. The colours used also intuitively indicates which gender we are referring to without the actual need of referring to the legend.\n\nFor instance, we observe that the density of results for males is skewed more to the right for Math and Science but more to the left for Reading, as compared to females. This is corroborated by the position of the median and mean on the boxplot. This indicates that males fair better in Math and Science but poorer in Reading as compared to females.\n\n## 4.3 Visualisation 3: Average Scores by School for each subject\n\n### 4.3.1 Critique\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = By_School,\n       aes(x = factor(1), y = Avg_Math)) +\n  geom_boxplot(notch = TRUE) +\n  stat_summary(geom = \"point\", fun.y = \"mean\", colour = \"maroon\", size = 2) +\n  ggtitle(\"Math Scores by School\") +\n  theme_hc() +\n  coord_cartesian(ylim = c(300, 750)) +\n  scale_y_continuous(breaks = seq(300, 750, by = 50)) +\n  theme(axis.text.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-34-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = By_School,\n       aes(x = factor(1), y = Avg_Read)) +\n  geom_boxplot(notch = TRUE) +\n  stat_summary(geom = \"point\", fun.y = \"mean\", colour = \"maroon\", size = 2) +\n  ggtitle(\"Reading Scores by School\") +\n  theme_hc() +\n  coord_cartesian(ylim = c(300, 750)) +\n  scale_y_continuous(breaks = seq(300, 750, by = 50)) +\n  theme(axis.text.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Science {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-36-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = By_School,\n       aes(x = factor(1), y = Avg_Scie)) +\n  geom_boxplot(notch = TRUE) +\n  stat_summary(geom = \"point\", fun.y = \"mean\", colour = \"maroon\", size = 2) +\n  ggtitle(\"Science Scores by School\") +\n  theme_hc() +\n  coord_cartesian(ylim = c(300, 750)) +\n  scale_y_continuous(breaks = seq(300, 750, by = 50)) +\n  theme(axis.text.x = element_blank(),axis.ticks.x = element_blank(),axis.title.x = element_blank(),axis.title.y = element_blank())\n```\n:::\n\n:::\n:::\n\n+-----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Positives                                                                                                             | Negatives                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n+=======================================================================================================================+====================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+\n| -   The graph is visually clean and neat.                                                                             | -   The y-axis representing PV scores is unlabelled as the code includes “axis.title.y = element_blank()”.                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n|                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| -   The mean value is represented as a maroon dot in the boxplot which provides an additional data point for readers. | -   Based on the [Code Book](https://webfs.oecd.org/pisa2022/CY08MSP_CODEBOOK_5thDecember23.xlsx) provided by OECD, PV scores can range from 0 to 1000 however the y-axis ranges from 300 to 750 which is a misrepresentation.                                                                                                                                                                                                                                                                                                                     |\n|                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n|                                                                                                                       | -   Notches in notched boxplots are meant to help readers to visually assess whether medians of distributions differ. If the notched areas do not overlap across boxplots, the medians are different from one another. However, in this case, the notch does not serve its purpose for comparison as the plots for Math, Reading and Science are separately indicated in tabsets. One cannot compare across all three subjects at a glance.                                                                                                        |\n|                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n|                                                                                                                       | -   Further, the visualisation also does not allow for an overall understanding of a school's performance i.e. whether the school consistently performs poorer in all subjects or only for certain subjects. It does not allow one to understand data patterns within the school i.e. spread of scores within each school which could be reflective of characteristics such as the effectiveness of school's methodology i.e. if the school's teaching methodology is effective for most students, there should be a smaller variation in results. |\n+-----------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n### 4.3.2 Sketch of alternative design\n\n![](Slide3.JPG){width=\"514\"}\n\nAs stated in [section 3.2](#sect3.2), the peer had created a dataframe *By_School* which includes the school ID and the average Math, Reading and Science scores for each school.\n\nGiven this dataframe, we will improve the original visualisation by:\n\n-   adding in the y-axis label and reset the limits of the y-axis scale to the range of 0 to 1000\n\n-   adding annotation to mark the median and corresponding value\n\n-   enhancing the boxplot by adding a density plot to provide more granularity to the data i.e. better understanding of the spread of the data\n\n-   having a side-by-side comparison of all 3 subjects via patchwork\n\n### 4.3.3 Remaking the design\n\nThe code chunks for the individual plots are as follows:\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np9 <- ggplot(data = By_School,\n       aes(y = Avg_Math)) +\n  geom_boxplot(notch = TRUE,\n               width=0.3,\n               colour=\"midnightblue\",\n               lwd=2) +\n  stat_halfeye(adjust = .5,\n               justification = -0.1,\n               .width = 0,\n               width = 3,\n               point_colour = NA,\n               fill=\"midnightblue\",\n               alpha=0.5)+\n  stat_summary(aes(x=0),geom = \"point\", fun.y = \"mean\", colour = \"black\", size = 5)+\n  stat_summary(aes(x = 0), geom = \"text\", fun.y = \"median\", \n               label = paste(\"Median:\", round(median(By_School$Avg_Math), 2)),\n               hjust = -0.45, vjust = -0.4, color = \"midnightblue\", size = 10)+\n  labs(title=\"Math Score across schools\",y = \"Math Score\")+\n  coord_cartesian(ylim = c(0, 1000)) +\n  scale_y_continuous(limits=c(0,1000),breaks = seq(0, 1000, by = 100)) +\n  coord_flip()+\n  theme_hc(base_size=30)+\n  theme(axis.text.y = element_blank(),axis.ticks.y = element_blank(),axis.title.y = element_blank(),aspect.ratio = 1/3)\n```\n:::\n\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np10 <- ggplot(data = By_School,\n       aes(y = Avg_Read)) +\n  geom_boxplot(notch = TRUE,\n               width=0.3,\n               colour=\"mediumvioletred\",\n               lwd=2) +\n  stat_halfeye(adjust = .5,\n               justification = -0.1,\n               .width = 0,\n               width = 3,\n               point_colour = NA,\n               fill=\"mediumvioletred\",\n               alpha=0.5)+\n  stat_summary(aes(x=0),geom = \"point\", fun.y = \"mean\", colour = \"black\", size = 5)+\n  stat_summary(aes(x = 0), geom = \"text\", fun.y = \"median\", \n               label = paste(\"Median:\", round(median(By_School$Avg_Read), 2)),\n               hjust = -0.45, vjust = -0.4, color = \"mediumvioletred\", size = 10)+\n  labs(title=\"Reading Score across schools\",y = \"Reading Score\")+\n  coord_cartesian(ylim = c(0, 1000)) +\n  scale_y_continuous(limits=c(0,1000),breaks = seq(0, 1000, by = 100)) +\n  coord_flip()+\n  theme_hc(base_size = 30)+\n  theme(axis.text.y = element_blank(),axis.ticks.y = element_blank(),axis.title.y = element_blank(),aspect.ratio = 1/3)\n```\n:::\n\n\n## Science {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np11 <- ggplot(data = By_School,\n       aes(y = Avg_Scie)) +\n  geom_boxplot(notch = TRUE,\n               width=0.3,\n               colour=\"seagreen3\",\n               lwd=2) +\n  stat_halfeye(adjust = .5,\n               justification = -0.1,\n               .width = 0,\n               width = 3,\n               point_colour = NA,\n               fill=\"seagreen3\",\n               alpha=0.5)+\n  stat_summary(aes(x=0),geom = \"point\", fun.y = \"mean\", colour = \"black\", size = 5)+\n  stat_summary(aes(x = 0), geom = \"text\", fun.y = \"median\", \n               label = paste(\"Median:\", round(median(By_School$Avg_Scie), 2)),\n               hjust = -0.45, vjust = -0.4, color = \"seagreen3\", size = 10)+\n  labs(title=\"Science Score across schools\",y = \"Science Score\")+\n  coord_cartesian(ylim = c(0, 1000)) +\n  scale_y_continuous(limits=c(0,1000),breaks = seq(0, 1000, by = 100)) +\n  coord_flip()+\n  theme_hc(base_size=30)+\n  theme(axis.text.y = element_blank(),axis.ticks.y = element_blank(),axis.title.y = element_blank(),aspect.ratio = 1/3)\n```\n:::\n\n:::\n\nWe then combine all 3 plots into one visualisation using the following code chunk:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(p9/p10/p11)+\n  plot_annotation(tag_levels = 'I')\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-41-1.png){width=2880}\n:::\n:::\n\n\nThe above visualisation allows us to better compare the performance of schools across all 3 subjects. At the school level, Math is the best performing subject, followed by Science and lastly Reading. The plots also indicate that there is considerable variability in the performance levels across different schools in all 3 subjects.\n\nHowever the visualisation still does not provide greater granularity into understanding a school's performance i.e. we are currently unable to visualise and compare each school's performance in all 3 subjects and the spread of results within each school. As such, the above visualisation could be supplemented by another visualisation, a ridgeline plot, which makes use of the larger data set *stu_qqq_SG_filtered* instead of the smaller sub-dataset *By_School*, and provides more details about the spread of performance within each school and each school's performance across subjects:\n\n### 4.3.4 Supplementary visualisation for performance across schools\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np12 <- ggplot(stu_qqq_SG_filtered,\n       aes(x = MATH_Score, \n           y = CNTSCHID, \n           fill = 0.5 - abs(0.5-stat(ecdf)))) +\n  stat_density_ridges(geom = \"density_ridges_gradient\", \n                      calc_ecdf = TRUE) +\n  scale_fill_viridis_c(name = \"Tail probability\",\n                       direction = -1,\n                       option=\"turbo\") +\n  coord_cartesian(xlim = c(0,1000))+\n  theme_ridges()+\n  theme(text = element_text(size = 20),axis.title = element_text(size = 20),axis.text=element_text(size=20),legend.key.size = unit(2, 'cm'),plot.title = element_text(size = 20))+\n  labs(title=\"Distribution of Math Scores of students for each school\",\n       y=\"School ID\",\n       x=\"Math Scores\")\n```\n:::\n\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np13 <- ggplot(stu_qqq_SG_filtered,\n       aes(x = READ_Score, \n           y = CNTSCHID, \n           fill = 0.5 - abs(0.5-stat(ecdf)))) +\n  stat_density_ridges(geom = \"density_ridges_gradient\", \n                      calc_ecdf = TRUE) +\n  scale_fill_viridis_c(name = \"Tail probability\",\n                       direction = -1,\n                       option=\"mako\") +\n  coord_cartesian(xlim = c(0,1000))+\n  theme_ridges()+\n  theme(text = element_text(size = 20),axis.title = element_text(size = 20),axis.text=element_text(size=20),legend.key.size = unit(2, 'cm'),plot.title = element_text(size = 20))+\n  labs(title=\"Distribution of Reading Scores of students for each school\",\n       y=\"School ID\",\n       x=\"Reading Scores\")\n```\n:::\n\n\n## Science {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np14 <- ggplot(stu_qqq_SG_filtered,\n       aes(x = SCIE_Score, \n           y = CNTSCHID, \n           fill = 0.5 - abs(0.5-stat(ecdf)))) +\n  stat_density_ridges(geom = \"density_ridges_gradient\", \n                      calc_ecdf = TRUE) +\n  scale_fill_viridis_c(name = \"Tail probability\",\n                       direction = -1,\n                       option=\"plasma\") +\n  coord_cartesian(xlim = c(0,1000))+\n  theme_ridges()+\n  theme(text = element_text(size = 20),axis.title = element_text(size = 20),axis.text=element_text(size=20),legend.key.size = unit(2, 'cm'),plot.title = element_text(size = 20))+\n  labs(title=\"Distribution of Science Scores of students for each school\",\n       y=\"School ID\",\n       x=\"Science Scores\")\n```\n:::\n\n:::\n\nWe combine all 3 plots together using the following code chunk:\n\n\n::: {.cell}\n\n```{.r .cell-code}\np12|p13|p14\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-45-1.png){width=2880}\n:::\n:::\n\n\nThis visualisation enables a more detailed comparison of performance across schools and within schools - it allows us to understand whether a school consistently performs better/poorer in all subjects or selectively better/poorer in certain subjects - for instance, we observe that schools 702000001 and 702000003 consistently perform better than other schools in all 3 subjects, while schools 702000115 and 702000149 perform consistently poorer.\n\nWe can also observe the spread of results within a school for each subject - schools with ridgeline plots that have flatter peaks aka a wider spread indicate more variability in the results. This larger spread could be attributed to various reasons i.e. that the school comprise students from a wide range of backgrounds and learning abilities or that varying teaching methodologies are used within the school hence leading to varying results. This will require further investigation.\n\n## 4.4 Visualisation 4: Scores per subject based on the student’s food security\n\n### 4.4.1 Critique\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-46-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes(x=ESCS,y=MATH_Score))+\n  geom_point()+\n  geom_smooth(method=lm,\n              size=0.5)+\n  ggtitle(\"Math Score by ESCS\") +\n  theme_hc() +\n  coord_cartesian(ylim = c(100, 900)) +\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-48-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes(x=ESCS,y=READ_Score))+\n  geom_point()+\n  geom_smooth(method=lm,\n              size=0.5)+\n  ggtitle(\"Reading Score by ESCS\") +\n  theme_hc() +\n  coord_cartesian(ylim = c(100, 900)) +\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.title.y = element_blank())\n```\n:::\n\n:::\n\n## Science {.unlisted}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-50-1.png){width=672}\n:::\n:::\n\n\n::: {.callout-note collapse=\"true\" icon=\"false\" appearance=\"minimal\"}\n## The Code {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data = stu_qqq_SG_filtered,\n       aes(x=ESCS,y=SCIE_Score))+\n  geom_point()+\n  geom_smooth(method=lm,\n              size=0.5)+\n  ggtitle(\"Science Score by ESCS\") +\n  theme_hc() +\n  coord_cartesian(ylim = c(100, 900)) +\n  scale_y_continuous(breaks = seq(100, 900, by = 100))+\n  theme(axis.title.y = element_blank())\n```\n:::\n\n:::\n:::\n\n+----------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Positives                                                                                                                  | Negatives                                                                                                                                                                                                                                                                                                                                                   |\n+============================================================================================================================+=============================================================================================================================================================================================================================================================================================================================================================+\n| -   The plot clearly shows a positive relationship between subject scores (Math, Reading and Science) with the ESCS index. | -   The plots are not visually appealing due to the mass of data points in the middle of the plot.                                                                                                                                                                                                                                                          |\n|                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                             |\n|                                                                                                                            | -   The y-axis representing PV scores is unlabelled as the code includes “axis.title.y = element_blank()”.                                                                                                                                                                                                                                                  |\n|                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                             |\n|                                                                                                                            | -   Based on the [Code Book](https://webfs.oecd.org/pisa2022/CY08MSP_CODEBOOK_5thDecember23.xlsx) provided by OECD, PV scores can range from 0 to 1000 however the y-axis ranges from 100 to 900 which is a misrepresentation. The ESCS index ranges from -6.84 to 7.38 however the x-axis ticks only indicate -2 to 2 which could be easily misintepreted. |\n|                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                             |\n|                                                                                                                            | -   The plots for Math, Reading and Science are separately indicated in tabsets. One cannot compare across all three subjects at a glance.                                                                                                                                                                                                                  |\n|                                                                                                                            |                                                                                                                                                                                                                                                                                                                                                             |\n|                                                                                                                            | -   The plots are not labelled with annotations to indicate the r2 value, which would be helpful in understanding the degree to which the variation in the subject scores could be explained by the variation in the ESCS index.                                                                                                                            |\n+----------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n### 4.4.2 Sketch of alternative design\n\n![](Slide4.JPG){width=\"514\"}\n\nWe will start by working off the original visualisation and taking the following steps to improve it:\n\n-   adding in the y-axis label and reset the limits of the y-axis scale to the range of 0 to 1000\n\n-   adding vlines to the plot to indicate the value of Singapore's ESCS index at the 0, 25th, 50th, 75th and 100th percentile. This is with reference to the notes indicated in the [PISA 2022 Results (Volume 1)](https://www.oecd-ilibrary.org/sites/53f23881-en/index.html?itemId=/content/publication/53f23881-en#:~:text=Singapore%20scored%20significantly%20higher%20than,countries%20and%20economies%20in%20mathematics.) where it was stated that ESCS refers to the PISA index of economic, social and cultural status and that a socio-economically advantaged (disadvantaged) student is a student in the **top (bottom) quarter of ESCS in his or her own country/economy**. It would hence be useful to indicate the ESCS index values of Singapore by percentiles.\n\n-   add r2 value to better understand how the variation in ESCS index affects the variation of scores\n\n-   having a side-by-side comparison of all 3 subjects via patchwork\n\n### 4.4.3 Remaking the design\n\nThe code chunks for the individual plots are as follows:\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np15 <- ggplot(data = stu_qqq_SG_filtered,\n       aes(x=ESCS,y=MATH_Score))+\n  geom_point(alpha=0.4,color=\"black\")+\n  geom_smooth(method=lm,\n              size=1,\n              colour=\"mediumblue\",\n              se=FALSE)+\n  labs(title=\"Math Score by ESCS\",\n       y=\"Math Score\",\n       x=\"ESCS index\")+\n  theme_hc() +\n  coord_cartesian(ylim = c(0, 1000)) +\n  scale_y_continuous(breaks = seq(0, 1000, by = 100))+\n  scale_x_continuous(limits = range(stu_qqq_SG_filtered$ESCS)) +\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0,na.rm=TRUE),\n             linetype = \"dashed\", color = \"coral2\", size = 0.8,label=\"0%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0, na.rm = TRUE)+0.5, y = 1000, size=3,label = paste(\"0%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0, na.rm = TRUE), 2)),color=\"coral2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.25,na.rm=TRUE),\n             linetype = \"dashed\", color = \"violetred2\", size = 0.8,label=\"25%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.25, na.rm = TRUE)-0.5, y = 1000, size=3,label = paste(\"25%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.25, na.rm = TRUE), 2)),color=\"violetred2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.5,na.rm=TRUE),\n             linetype = \"dashed\", color = \"turquoise2\", size = 0.8,label=\"50%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.5, na.rm = TRUE), y = 1000, size=3,label = paste(\"50%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.5, na.rm = TRUE), 2)),color=\"turquoise2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.75,na.rm=TRUE),\n             linetype = \"dashed\", color = \"purple\", size = 0.8,label=\"75%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.75, na.rm = TRUE)+0.4, y = 1000, size=3,label = paste(\"75%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.75, na.rm = TRUE), 2)),color=\"purple\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 1,na.rm=TRUE),\n             linetype = \"dashed\", color = \"orange\", size = 0.8,label=\"100%\")+\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 1, na.rm = TRUE)-0.5, y = 1000, size=3,label = paste(\"100%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 1, na.rm = TRUE), 2)),color=\"orange\")+\n  stat_cor(aes(label = paste(..rr.label..,..p.label.., sep = \"~`,`~\")),\n           label.x = 2.2, label.y = 800, label.size = 4) +\n  theme(axis.title.y = element_blank())\n```\n:::\n\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np16 <- ggplot(data = stu_qqq_SG_filtered,\n       aes(x=ESCS,y=READ_Score))+\n  geom_point(alpha=0.4,color=\"black\")+\n  geom_smooth(method=lm,\n              size=1,\n              colour=\"mediumblue\",\n              se=FALSE)+\n  labs(title=\"Reading Score by ESCS\",\n       y=\"Reading Score\",\n       x=\"ESCS index\")+\n  theme_hc() +\n  coord_cartesian(ylim = c(0, 1000)) +\n  scale_y_continuous(breaks = seq(0, 1000, by = 100))+\n  scale_x_continuous(limits = range(stu_qqq_SG_filtered$ESCS)) +\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0,na.rm=TRUE),\n             linetype = \"dashed\", color = \"coral2\", size = 0.8,label=\"0%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0, na.rm = TRUE)+0.5, y = 1000, size=3,label = paste(\"0%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0, na.rm = TRUE), 2)),color=\"coral2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.25,na.rm=TRUE),\n             linetype = \"dashed\", color = \"violetred2\", size = 0.8,label=\"25%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.25, na.rm = TRUE)-0.5, y = 1000, size=3,label = paste(\"25%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.25, na.rm = TRUE), 2)),color=\"violetred2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.5,na.rm=TRUE),\n             linetype = \"dashed\", color = \"turquoise2\", size = 0.8,label=\"50%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.5, na.rm = TRUE), y = 1000, size=3,label = paste(\"50%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.5, na.rm = TRUE), 2)),color=\"turquoise2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.75,na.rm=TRUE),\n             linetype = \"dashed\", color = \"purple\", size = 0.8,label=\"75%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.75, na.rm = TRUE)+0.4, y = 1000, size=3,label = paste(\"75%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.75, na.rm = TRUE), 2)),color=\"purple\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 1,na.rm=TRUE),\n             linetype = \"dashed\", color = \"orange\", size = 0.8,label=\"100%\")+\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 1, na.rm = TRUE)-0.5, y = 1000, size=3,label = paste(\"100%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 1, na.rm = TRUE), 2)),color=\"orange\")+\n  stat_cor(aes(label = paste(..rr.label..,..p.label.., sep = \"~`,`~\")),\n           label.x = 2.2, label.y = 800, label.size = 4) +\n  theme(axis.title.y = element_blank())\n```\n:::\n\n\n## Science {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np17 <- ggplot(data = stu_qqq_SG_filtered,\n       aes(x=ESCS,y=SCIE_Score))+\n  geom_point(alpha=0.4,color=\"black\")+\n  geom_smooth(method=lm,\n              size=1,\n              colour=\"mediumblue\",\n              se=FALSE)+\n  labs(title=\"Science Score by ESCS\",\n       y=\"Science Score\",\n       x=\"ESCS index\")+\n  theme_hc() +\n  coord_cartesian(ylim = c(0, 1000)) +\n  scale_y_continuous(breaks = seq(0, 1000, by = 100))+\n  scale_x_continuous(limits = range(stu_qqq_SG_filtered$ESCS)) +\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0,na.rm=TRUE),\n             linetype = \"dashed\", color = \"coral2\", size = 0.8,label=\"0%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0, na.rm = TRUE)+0.5, y = 1000, size=3,label = paste(\"0%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0, na.rm = TRUE), 2)),color=\"coral2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.25,na.rm=TRUE),\n             linetype = \"dashed\", color = \"violetred2\", size = 0.8,label=\"25%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.25, na.rm = TRUE)-0.5, y = 1000, size=3,label = paste(\"25%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.25, na.rm = TRUE), 2)),color=\"violetred2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.5,na.rm=TRUE),\n             linetype = \"dashed\", color = \"turquoise2\", size = 0.8,label=\"50%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.5, na.rm = TRUE), y = 1000, size=3,label = paste(\"50%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.5, na.rm = TRUE), 2)),color=\"turquoise2\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 0.75,na.rm=TRUE),\n             linetype = \"dashed\", color = \"purple\", size = 0.8,label=\"75%\") +\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 0.75, na.rm = TRUE)+0.4, y = 1000, size=3,label = paste(\"75%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 0.75, na.rm = TRUE), 2)),color=\"purple\")+\n  geom_vline(xintercept = quantile(stu_qqq_SG_filtered$ESCS, 1,na.rm=TRUE),\n             linetype = \"dashed\", color = \"orange\", size = 0.8,label=\"100%\")+\n  annotate(\"text\", x = quantile(stu_qqq_SG_filtered$ESCS, 1, na.rm = TRUE)-0.5, y = 1000, size=3,label = paste(\"100%: \", round(quantile(stu_qqq_SG_filtered$ESCS, 1, na.rm = TRUE), 2)),color=\"orange\")+\n  stat_cor(aes(label = paste(..rr.label..,..p.label.., sep = \"~`,`~\")),\n           label.x = 2.2, label.y = 800, label.size = 4) +\n  theme(axis.title.y = element_blank())\n```\n:::\n\n:::\n\nWe then combine the 3 plots into one visualisation using the following code:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(p15/p16/p17)+\n  plot_annotation(tag_levels = \"I\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-55-1.png){width=960}\n:::\n:::\n\n\nFrom the visualisation above, we can observe the scores are generally positively correlated with the ESCS index. However, based on the R2 values (which are approximately \\~0.2), the variation in ESCS index weakly explains the variation in the scores.\n\nFurther, it is observed that there are a range of scores within the different quantiles of ESCS index i.e. within the 25th percentile, scores vary between a large range, \\~300 to \\~800 for Math and Science and \\~200 to \\~700 for Reading. It would hence be better to explore how the scores would vary across the different levels of ESCS index. To do this, we will explore another form of visualisation in the next section.\n\n### 4.4.4 Supplementary visualisation for performance across different ESCS index values\n\nGiven that socio-economically disadvantaged and advantaged refer to the bottom and top quarter of ESCS in his or her own country/economy, we could bin the ESCS index values for exploratory data analysis.\n\nThis would allow us to study the distribution of scores within the ESCS quantiles and additionally counter the issue of having a mass of data points on the plot which might be aesthetically unpleasing, which the earlier remake was unable to tackle.\n\n### 4.4.4.1 Removing missing values and binning variable ESCS\n\nIn earlier steps, we observed that there are 47 missing values for the ESCS variable and this is confirmed by the code chunk below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npaste(\"There are\",sum(is.na(stu_qqq_SG_filtered$ESCS)),\"missing values for ESCS.\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"There are 47 missing values for ESCS.\"\n```\n\n\n:::\n:::\n\n\nAs this makes up less than 1% of the dataset, the rows with missing values for ESCS were removed before further analysis.\n\nThe code chunk below removes rows with missing values for ESCS:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered <- stu_qqq_SG_filtered[complete.cases(stu_qqq_SG_filtered[, \"ESCS\"]), ]\n```\n:::\n\n\nWe will bin the ESCS variable into quantiles using the mutate() and cut() function, and the code chunk is as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstu_qqq_SG_filtered <- stu_qqq_SG_filtered %>%\n  mutate(ESCS_recoded = cut(ESCS,breaks=quantile(ESCS,c(0,0.25,0.5,0.75,1)),labels=c(\"Quarter 1\",\"Quarter 2\",\"Quarter 3\",\"Quarter 4\"),include.lowest=TRUE,na.rm=TRUE))\n```\n:::\n\n\n**Quarter 1 refers to the most socio-economically disadvantaged while Quarter 4 refers to the most socio-economically advantaged.**\n\n### 4.4.4.2 Visualisation of performance across different quantiles of ESCS index\n\nThe code chunks for the individual plots are as follows:\n\n::: panel-tabset\n## Math {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np18 <- ggplot(data = stu_qqq_SG_filtered,\n       aes (x = ESCS_recoded, y = MATH_Score, fill = ESCS_recoded,alpha=0.5))+\n  geom_boxplot(notch=TRUE,\n               width = 0.1,\n               position = position_nudge(x=0.06))+\n  stat_halfeye(adjust = 0.5,\n               width = 0.6,\n               justification = -0.3,\n               .width = 0,\n               point_colour = NA,\n               position = \"dodge\",\n               scale=0.9) +\n  stat_dots(side = \"left\", \n            justification = 1, \n            binwidth = .5,\n            dotsize = 10) +\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"black\", size=1,position=position_nudge(x=0.06))+\n  labs(title = \"Math Scores by ESCS quantiles\",\n       y = \"Math Score\",\n       x = \"ESCS quantiles\")+\n  theme_hc(base_size=10)+\n  theme(legend.position = \"right\",aspect.ratio = 1/2)+\n  guides(alpha=\"none\")+\n  coord_cartesian(ylim = c(0, 1000))+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0, 1000, by = 100))+\n  coord_flip()\n```\n:::\n\n\n## Reading {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np19 <- ggplot(data = stu_qqq_SG_filtered,\n       aes (x = ESCS_recoded, y = READ_Score, fill = ESCS_recoded,alpha=0.5))+\n  geom_boxplot(notch=TRUE,\n               width = 0.1,\n               position = position_nudge(x=0.06))+\n  stat_halfeye(adjust = 0.5,\n               width = 0.6,\n               justification = -0.3,\n               .width = 0,\n               point_colour = NA,\n               position = \"dodge\",\n               scale=0.9) +\n  stat_dots(side = \"left\", \n            justification = 1, \n            binwidth = .5,\n            dotsize = 10) +\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"black\", size=1,position=position_nudge(x=0.06))+\n  labs(title = \"Reading Scores by ESCS quantiles\",\n       y = \"Reading Score\",\n       x = \"ESCS quantiles\")+\n  theme_hc(base_size=10)+\n  theme(legend.position = \"right\",aspect.ratio = 1/2)+\n  guides(alpha=\"none\")+\n  coord_cartesian(ylim = c(0, 1000))+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0, 1000, by = 100))+\n  coord_flip()\n```\n:::\n\n\n## Science {.unlisted}\n\n\n::: {.cell}\n\n```{.r .cell-code}\np20 <- ggplot(data = stu_qqq_SG_filtered,\n       aes (x = ESCS_recoded, y = SCIE_Score, fill = ESCS_recoded,alpha=0.5))+\n  geom_boxplot(notch=TRUE,\n               width = 0.1,\n               position = position_nudge(x=0.06))+\n  stat_halfeye(adjust = 0.5,\n               width = 0.6,\n               justification = -0.3,\n               .width = 0,\n               point_colour = NA,\n               position = \"dodge\",\n               scale=0.9) +\n  stat_dots(side = \"left\", \n            justification = 1, \n            binwidth = .5,\n            dotsize = 10) +\n  stat_summary(geom = \"point\", fun.y= \"mean\", colour =\"black\", size=1,position=position_nudge(x=0.06))+\n  labs(title = \"Science Scores by ESCS quantiles\",\n       y = \"Science Score\",\n       x = \"ESCS quantiles\")+\n  theme_hc(base_size=10)+\n  theme(legend.position = \"right\",aspect.ratio = 1/2)+\n  guides(alpha=\"none\")+\n  coord_cartesian(ylim = c(0, 1000))+\n  scale_y_continuous(limits = c(0,1000),breaks = seq(0, 1000, by = 100))+\n  coord_flip()\n```\n:::\n\n:::\n\nWe then combine the 3 visualisations using the following code chunk:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(p18/p19/p20)+\n  plot_annotation(tag_levels = \"I\")\n```\n\n::: {.cell-output-display}\n![](Take-home_Ex2_files/figure-html/unnamed-chunk-62-1.png){width=768}\n:::\n:::\n\n\nThis visualisation not only indicates the general positive relationship scores have with ESCS index - the scores increase with the increasingly socio-economically advantaged i.e. higher scores are observed for Quarter 4 and lower scores are observed for the lower quarters, for all 3 subjects - it also shows the spread of performance within each ESCS quantile. For instance, for Math and Reading, the density plot for Quarter 1 is skewed more towards the left (lower scores) as compared to Quarters 2 to 4 which are skewed more towards the right. This is less obvious from the distribution of Science scores where Quarter 1 has a seemingly more normal distribution. This indicates that students that are more socio-economically disadvantaged are more affected in terms of Math and Reading. However, this would require further investigation to determine if the observation is significant.\n\nOverall, this remake does counter the negative points of the original visualisation, it is more aesthetically pleasing without the clutter of the data points and clearer and more granular in indicating the distribution of performance by ESCS index.\n\n# 5. Key Learning Points\n\nWhen carrying out visualisation, to always keep in mind:\n\n-   [**WHY**]{.underline} you are doing this visualisation\n\n-   [**WHAT**]{.underline} is it that you want to convey\n\n-   [**WHO**]{.underline} is it that you are conveying to and to always **think from the reader's perspective**\n\n-   The above will eventually provide more clarity on [**HOW**]{.underline} to carry out the visualisation\n\n# 6. References\n\n-   [PISA 2022 Database](https://www.oecd.org/pisa/data/2022database/)\n\n-   [PISA 2022 Definitions](https://gpseducation.oecd.org/content/notes/definitions_pisa_gps.pdf)\n\n-   [PISA 2022 Results (Volume I)](https://www.oecd-ilibrary.org/sites/53f23881-en/index.html?itemId=/content/publication/53f23881-en#:~:text=Singapore%20scored%20significantly%20higher%20than,countries%20and%20economies%20in%20mathematics.)\n\n-   [Notched box plots](https://help.xlstat.com/6589-notched-box-plots-tutorial-excel#:~:text=Interpreting%20notched%20box%20plots&text=The%20red%20crosses%20correspond%20to,are%20different%20from%20one%20another.)\n",
    "supporting": [
      "Take-home_Ex2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}